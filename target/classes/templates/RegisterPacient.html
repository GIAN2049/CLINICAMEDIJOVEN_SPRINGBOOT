<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">

<head>
	<meta charset="UTF-8">
		<!-- start: Icons -->
	<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
	<!-- start: Icons -->
	<!-- start: CSS -->
	<link rel="stylesheet" th:href="@{/css/core.css}" />
	<link rel="stylesheet" th:href="@{/css/theme-default.css}" />
	<link rel="stylesheet" th:href="@{/css/style.css}">
	<link rel="stylesheet" th:href="@{/css/page-auth.css}">
	<!-- end: CSS -->
	<title>Insert title here</title>
</head>

<body>
	<div class="container-xxl">
		<div class="authentication-wrapper authentication-basic container-p-y">
			<div class="authentication-inner">
				<!-- Register Card -->
				<div class="card" style="width: 500px;">
					<div class="card-body">
						<!-- Logo -->
						<div class="app-brand justify-content-center">
							<a href="index.html" class="app-brand-link gap-2">
								<span class="app-brand-text demo text-body fw-bolder">MEDIJOVEN</span>
							</a>
						</div>
						<!-- /Logo -->
						<h4 class="mb-3">Crear Cuenta! üöÄ</h4>

						<form id="id_form" class="mb-3 row g-3">
							<div class="col-md-6">
								<label for="nombre" class="form-label">Nombre</label>
								<input type="text" class="form-control" id="nombre" name="nombre_paciente"
									placeholder="Enter your username" autofocus />
							</div>
							<div class="col-md-6">
								<label for="apellido" class="form-label">Apellidos</label>
								<input type="text" class="form-control" id="apellido" name="apellidos"
									placeholder="Enter your username" autofocus />
							</div>
							<div class="col-md-6">
								<label for="dni" class="form-label">Dni</label>
								<input type="text" class="form-control" id="dni" name="dni"
									placeholder="Enter your username" autofocus />
							</div>
							<div class="col-md-6">
								<label for="telefono" class="form-label">Telefono</label>
								<input type="text" class="form-control" id="telefono" name="telefono"
									placeholder="Enter your username" autofocus />
							</div>
							<div class="col-md-12">
								<label for="direccion" class="form-label">Direccion</label>
								<input type="text" class="form-control" id="direccion" name="direccion"
									placeholder="Enter your username" autofocus />
							</div>
							
							<div class="col-md-6">
								<label for="sexo" class="form-label">Sexo</label>
								<input type="text" class="form-control" id="sexo" name="sexo"
									placeholder="Enter your username" autofocus />
							</div>
							<div class="col-md-6">
								<label for="fechaNacimiento" class="form-label">Fecha de Nacimiento</label>
								<input type="date" class="form-control" id="fechaNacimiento" name="Fecha_nacimiento"
									placeholder="Enter your username" autofocus />
							</div>
							<div class="col-md-6">
								<label for="email" class="form-label">Username</label>
								<input type="text" class="form-control" name="username" placeholder="Escriba su usuario" autofocus />
							</div>
							<div class="col-md-6 form-password-toggle">
								<label class="form-label" for="password">Password</label>
								<div class="input-group input-group-merge">
									<input type="password" id="password" class="form-control" name="password"
										placeholder="&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;"
										aria-describedby="password" />
									<span class="input-group-text cursor-pointer"><i class="bx bx-hide"></i></span>
								</div>
							</div>
							<button type="submit" class="btn btn-primary d-grid w-100" id="id_registrar">Crear Cuenta</button>
						</form>
						<p class="text-center">
						<span>Ya tienes una cuenta?</span>
						<a th:href="@{/cuenta/login}">
							<span>Inicia Sesion</span>
						</a>
					</p>
					</div>
				</div>
				<!-- Register Card -->
			</div>
		</div>
	</div>
	
	
	
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script th:src="@{/js/bootstrap.js}"></script>
	<script th:src="@{/js/helpers.js}"></script>
	<script th:src="@{/js/main.js}"></script>

	<script src="//cdn.jsdelivr.net/npm/sweetalert2@10"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-validator/0.5.3/js/bootstrapValidator.min.js"></script>

	<script type="text/javascript">
		$(document).ready(function () {
			
			
			$('#id_form').bootstrapValidator({
				fields: {
					nombre_paciente: {
						validators: {
							notEmpty: {
								message: 'Campo Nombre es obligatorio'
							},
							stringLength: {
								message: 'El Nombre es de 2 a 40 caracteres',
								min: 2,
								max: 40
							}
						}
					},
					apellidos: {
						validators: {
							notEmpty: {
								message: 'Campo Apellidos es obligatorio'
							},
							stringLength: {
								message: 'El Apellido es de 2 a 40 caracteres',
								min: 2,
								max: 40
							}

						}
					},
					dni: {
						validators: {
							notEmpty: {
								message: 'Campo DNI es obligatorio'
							},
							stringLength: {
								min: 8,
								max: 8,
								message: 'El DNI debe tener exactamente 8 digitos'
							},
							regexp: {
								regexp: /^[0-9]+$/,
								message: 'El DNI solo puede contener d√≠gitos num√©ricos'
							}
						}
					},
					direccion: {
						validators: {
							notEmpty: {
								message: 'Campo Direcci√≥n es obligatorio'
							}
						}
					},
					username: {
						validators: {
							notEmpty: {
								message: 'Campo Username es obligatorio'
							}
						}
					},
					telefono: {
						validators: {
							notEmpty: {
								message: 'Campo Tel√©fono es obligatorio'
							},
							stringLength: {
								min: 9,
								max: 9,
								message: 'El Telefono debe tener exactamente 9 digitos'
							},
							regexp: {
								regexp: /^[0-9]+$/,
								message: 'El Telefono solo puede contener d√≠gitos num√©ricos'
							}
						}
					},
					sexo: {
						validators: {
							notEmpty: {
								message: 'Campo Sexo es obligatorio'
							}
						}
					},
					password: {
						validators: {
							notEmpty: {
								message: 'Campo Contrase√±a es obligatorio'
							}
						}
					},
					Fecha_nacimiento: {
						validators: {
							notEmpty: {
								message: 'Campo Fecha de nacimiento es obligatorio'
							}
						}
					}
				}
			});
			
			
			$("#id_registrar").click(function () {

				$('#id_form').bootstrapValidator('validate');

				if ($('#id_form').data('bootstrapValidator').isValid()) {

					$.ajax({
						type: "POST",
						url: "/cuenta/registrar",
						data: $('#id_form').serialize(),
						success: function (data) {
							// Mostrar mensaje de √©xito con SweetAlert2
							Swal.fire({
								icon: 'success',
								title: '√âxito',
								text: data.MENSAJE,
								onClose: function () {
									limpiarFormulario();
								}
							});
						},
						error: function (data) {
							// Mostrar mensaje de error con SweetAlert2
							Swal.fire({
								icon: 'error',
								title: 'Error',
								text: data.MENSAJE,
								footer: xhr.responseText
							});
						}
					});

				}




			});

			// Funci√≥n para limpiar el formulario (reemplaza esto con tu funci√≥n real)
			function limpiarFormulario() {
				$('#id_form').trigger("reset");
			}
		});
	</script>
	
	
	
	
	
	
	
	
	
	
</body>
</html>